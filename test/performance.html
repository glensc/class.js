<!doctype html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="../jquery.class.js"></script>
    <script src="https://github.com/kilhage/jquery-benchmark/raw/master/jquery-benchmark.js"></script>
    <script>
        
        $(function(){
            var results = $("#results");
            
            for ( var message in tests ) {
                results.append("<li>"+message+" :: "+tests[message]()+"ms</li>");
            }
            
        });
        
        var times, a, b, tests = {}, 
        
        test = function(name, fn){
            tests[name] = function(){
                $.benchmark.start();
                fn();
                return $.benchmark.end().result();
            }
        };
        
        test("Building 20.000 basic classes", function(){
            times = 10000;
            while(times--) {
                a = $.Class({

                    init: function(){}

                });

                b = a.extend({
                    init: function(){this._parent();}
                });
            }
        });
        
        test("Building 20.000 static classes", function(){
            times = 10000;
            while(times--) {
                a = $.Class({

                    staticFn: function(){},

                    prototype: {
                        init: function(){}
                    }

                });

                b = a.extend({

                    staticFn: function(){this._parent();},

                    prototype: {
                        init: function(){this._parent();}
                    }

                });
            }
        });
        
        test("Initalizing 100.000 objects using with the new keyword", function(){
            var a = $.Class({
                init: function(){}
            });
            times = 100000;
            while(times--) {
                b = new a();
            }
        });
        
        test("Initalizing 100.000 objects using without the new keyword", function(){
            var a = $.Class({
                init: function(){}
            });
            times = 100000;
            while(times--) {
                b = a();
            }
            
        });
        
        var fns = {};
        times = 50;
        while(times--)
            fns["fn"+times] = function(){};
        
        test("$.Class.initPopulator(50 functions) and $.Class.rewrite(20000 times)", function(){
            var populator = $.Class.initPopulator(fns), self = {
                test: function(){this._parent();}
            };
            times = 20000;
            while(times--)
                $.Class.rewrite("test", self, self, populator);
        });
        
    </script>
  </head>
  <body>
      <center id="results" style="margin-top:90px"></center>
  </body>
</html>
