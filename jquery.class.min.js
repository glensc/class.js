/*--------------------------------------------*
 * Low-level plugin that helps 
 * you to create classes/objects
 * https://github.com/kilhage/jquery-class
 *--------------------------------------------*
 * Author Emil Kilhage
 * MIT Licensed
 *--------------------------------------------*
 * Last Update: 2011-04-06 23:28:57
 * Version 1.0.0
 *--------------------------------------------*/
(function(m){function n(a,b,c,g){c=c!=null?c:b;for(var e in a)if(a.hasOwnProperty(e))c[e]=d.rewrite(e,a,b,g);return b}function j(a){return x.call(a)==="[object Function]"}var q=false,d,r="__Class"+(new Date).getTime(),o=r+"__",u=/\b_parent\b/.test(function(){this._parent()}),v=u?/\b_parent\b/:/.*/,p=u?/\b_parent\b\./:/.*/,y=RegExp.prototype.test,x=Object.prototype.toString,s=function(){function a(b){if(this instanceof a){if(q===false&&j(this.init))this.init.apply(this,typeof b==="object"&&b!==null&&
b.callee?b:arguments)}else return new a(arguments)}a[o]=true;return a},k=s();k.extend=function(a,b){var c=s(),g,e=this,f,l=e.prototype;if(typeof a!=="boolean")b=a;b=typeof b==="object"&&b!==null?b:{};f=b.prototype;for(g in e)if(e.hasOwnProperty(g))c[g]=e[g];if(a===true||typeof f==="object"&&f!=null){n(b,e,c,d.initPopulator(e));b=f}c.constructor=c;q=true;f=new e;q=false;b=b||{};n(b,l,f,d.initPopulator(l));c.prototype=f;c.prototype.constructor=c;c.inherits=function(h){return h===e||e.inherits(h)};return c};
k.addMethods=function(a){return n(a,this.prototype)};k.inherits=function(){return false};k.prototype={addMethods:function(a){return n(a,this)}};p.test=function(a){return y.call(p,a)||a[o]===true};d=function(a,b){return k.extend(a,b)};d.fnSearch=v;d.parentFnSearch=p;d.log_prefix="__Class";d.errors={logic_parent_call:"Logic error, unable to call the parent function since it isn't defined..",invalid_$:"Invalid data-type of the global '$' property"};d.makeClass=s;d.rewrite=function(a,b,c,g){return j(b[a])&&
(j(c[a])||!(a in c))&&!d.is(b[a])&&v.test(b[a])?function(e,f,l){f||(f=function(){throw d.log_prefix+d.errors.logic_parent_call;});var h=!!(j(l)&&p.test(e)),w=function(){var z="_parent"in this,A=this._parent,i;if(h===true){h=false;i=l();for(var t in i)if(i.hasOwnProperty(t))f[t]=i[t]}this._parent=f;this._parent[r]=this;i=e.apply(this,arguments);if(z)this._parent=A;else try{delete this._parent}catch(B){}return i};w[o]=h;return w}(b[a],c[a],g):b[a]};d.is=function(a){return!!(a&&a[o]===true)};d.initPopulator=
function(a){var b;return function(){if(b==null){b={};for(var c in a)if(j(a[c]))b[c]=function(g){return function(){return g.apply(this[r],arguments)}}(a[c])}return b}};if(!m.$){if("$"in m)throw d.log_prefix+d.errors.invalid_$;m.$={}}m.$.Class=d})(this);
