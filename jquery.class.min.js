/*--------------------------------------------*
 * Low-level plugin that helps 
 * you to create classes/objects
 * https://github.com/kilhage/jquery-class
 *--------------------------------------------*
 * Author Emil Kilhage
 * MIT Licensed
 *--------------------------------------------*
 * Last Update: 2011-04-21 19:35:14
 * Version 1.0.0
 *--------------------------------------------*/
(function(m){function e(a,b){return h.extend(a,b)}function n(a,b,c,g){c=c!=null?c:b;for(var d in a)if(a.hasOwnProperty(d))c[d]=e.rewrite(d,a,b,g);return b}function k(a){return x.call(a)==="[object Function]"}var p=false,q="_Class"+(new Date).getTime()+"_",t="_"+q+"_",u=/\b_parent\b/.test(function(){this._parent()}),v=u?/\b_parent\b/:/.*/,o=u?/\b_parent\b\./:/.*/,y=RegExp.prototype.test,x=Object.prototype.toString,r=function(){return function a(b){if(this instanceof a){if(p===false&&k(this.init))this.init.apply(this,
typeof b==="object"&&b!==null&&b.callee?b:arguments)}else return new a(arguments)}},h=r();h.extend=function(a,b){var c=r(),g,d=this,f,l=d.prototype;if(typeof a!=="boolean")b=a;b=typeof b==="object"&&b!==null?b:{};f=b.prototype;for(g in d)if(d.hasOwnProperty(g))c[g]=d[g];if(a===true||typeof f==="object"&&f!=null){n(b,d,c,e.initPopulator(d));b=f}p=true;f=new d;p=false;b=b||{};n(b,l,f,e.initPopulator(l));c.prototype=f;c.constructor=c.prototype.constructor=c;c.inherits=function(i){return i===d||d.inherits(i)};
return c};h.addMethods=function(a){return n(a,this.prototype)};h.inherits=function(){return false};h.prototype={addMethods:function(a){return n(a,this)}};o.test=function(a){return y.call(o,a)||a[t]===true};e.fnSearch=v;e.parentFnSearch=o;e.log_prefix="_Class";e.errors={logic_parent_call:": Logic error, unable to call the parent function since it isn't defined..",invalid_$:": Invalid data-type of the global '$' property"};e.makeClass=r;e.rewrite=function(a,b,c,g){return k(b[a])&&(k(c[a])||!(a in c))&&
!e.is(b[a])&&v.test(b[a])?function(d,f,l){f||(f=function(){throw"_Class"+e.errors.logic_parent_call;});var i=!!(k(l)&&o.test(d)),w=function(){var z="_parent"in this,A=this._parent,j;if(i===true){i=false;j=l();for(var s in j)if(j.hasOwnProperty(s))f[s]=j[s]}this._parent=f;this._parent[q]=this;j=d.apply(this,arguments);if(z)this._parent=A;else try{delete this._parent}catch(B){}return j};w[t]=i;return w}(b[a],c[a],g):b[a]};e.is=function(a){return!!(a&&a.extend===h.extend)};e.initPopulator=function(a){var b;
return function(){if(b==null){b={};for(var c in a)if(k(a[c]))b[c]=function(g){return function(){return g.apply(this[q],arguments)}}(a[c])}return b}};if(!m.$){if("$"in m)throw"_Class"+e.errors.invalid_$;m.$={}}m.$.Class=e})(this);
