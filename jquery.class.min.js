/*--------------------------------------------*
 * Useful extensions when
 * you are creating your own
 * javascript objects/classes
 *--------------------------------------------*
 * Orgins from:
 * Simple JavaScript Inheritance and makeClass
 * by John Resig http://ejohn.org/
 *--------------------------------------------*
 * Added functionality by Emil Kilhage
 *--------------------------------------------*
 * Last Update: 2011-02-27 18:54:08
 *--------------------------------------------*/
(function(j){function k(a,b,d,f){d=d!=null?d:b;for(var e in a)if(a.hasOwnProperty(e))d[e]=c.rewrite(e,a,b,f);return b}function h(a){return v.call(a)==="[object Function]"}var m=false,p="$.Class :: "+(new Date).getTime(),q=/\b_parent\b/.test(function(){this._parent()}),r=q?/\b_parent\b/:/.*/,s=q?/\b_parent\b\./:/.*/,v=Object.prototype.toString,n=function(){function a(b){if(this instanceof a){if(m===false&&h(this.init))this.init.apply(this,typeof b==="object"&&b!==null&&b.callee?b:arguments)}else return new a(arguments)}
a.__is_class__=p;return a},l=n();l.extend=function(a,b){var d=n(),f,e,g=this.prototype||{};if(typeof a!=="boolean")b=a;b=typeof b==="object"&&b!==null?b:{};e=b.prototype;for(f in this)if(this.hasOwnProperty(f))d[f]=this[f];if(a===true||typeof e==="object"&&e!=null){c.validate(b);k(b,this,d,c.initPopulator(this));b=e}d.constructor=d;m=true;e=new this;m=false;b=b||{};c.validate(b);k(b,g,e,c.initPopulator(g));d.prototype=e;return d};l.addMethods=function(a){return k(a,this.prototype)};l.prototype={addMethods:function(a){return k(a,
this)}};var c=function(a,b){return l.extend(a,b)};c.fnSearch=r;c.parentFnSearch=s;c.log_prefix="$.Class :: ";c.errors={logic_parent_call:"Logic error, unable to call the parent function since it isn't defined..",self_in_prop:"'__self__' is a preserved word used in the jQuery.Class plugin, please rename the function"};c.makeClass=n;c.rewrite=function(a,b,d,f){return h(b[a])&&(h(d[a])||!(a in d))&&!c.is(b[a])&&r.test(b[a])?function(e,g,t){g=g||function(){throw c.log_prefix+c.errors.logic_parent_call;
};var u=h(t)&&s.test(e);return function(){var w=this.hasOwnProperty("_parent"),x=this._parent,i;if(u===true){u=false;i=t();for(var o in i)if(i.hasOwnProperty(o))g[o]=i[o]}this._parent=g;this._parent.__self__=this;i=e.apply(this,arguments);if(w)this._parent=x;else try{delete this._parent}catch(y){}return i}}(b[a],d[a],f):b[a]};c.is=function(a){return a.__is_class__===p};c.initPopulator=function(a){var b;return function(){if(b==null){b={};for(var d in a)if(a.hasOwnProperty(d)&&h(a[d]))b[d]=function(f){return function(){return f.apply(this.__self__,
arguments)}}(a[d])}return b}};c.validate=function(a){if(h(a.__self__))throw c.log_prefix+c.errors.self_in_prop;};if(!j.$)j.$={};j.$.Class=c;if("jQuery"in j)j.jQuery.Class=c})(window);
